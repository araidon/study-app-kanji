# 漢字熟語ゲーム 開発仕様書

## 技術スタック

| 項目 | 技術 |
|------|------|
| フレームワーク | React 19 + TypeScript 5 |
| ビルドツール | Vite 7 |
| スタイリング | CSS Modules |
| ホスティング | Cloudflare Pages |

## 画面構成

### 1. タイトル画面 (TitleScreen)
- ゲームタイトル・サブタイトル
- 時間設定スライダー（1〜10分）
- ヒント設定（ON/OFF、5〜60秒）
- 「ゲームスタート」ボタン
- 遊び方の説明

### 2. ゲーム画面 (GameScreen)
- **情報バー**: 残り時間、得点、山札枚数
- **結果バナー**: 正解/不正解のフィードバック表示
- **手札エリア**: 4x4グリッド（16枚）のカード配置
- **アクションボタン**: すてる、ぜんぶすてる、おわる

### 3. 結果画面 (ResultScreen)
- 最終得点
- 作成した熟語数
- 作成した熟語一覧（得点・読み付き）
- 「もういちど あそぶ」ボタン

## ゲームルール

### 基本ルール
1. ゲーム開始時に80枚のカードをシャッフルし、16枚を手札として配布
2. カードを2枚選択して熟語を作成
3. 1枚目→2枚目の選択順で熟語を判定
4. 正解なら得点加算、2枚消費、2枚補充
5. 不正解なら選択解除（ペナルティなし）
6. 不要なカードは捨てて1枚補充

### 終了条件
- 制限時間経過
- 山札が0枚になり、手札も0枚

### 得点システム

| 熟語タイプ | 点数 | 例 |
|------------|------|-----|
| 一般的な熟語 | 2点 | 火山、天気 |
| 数字関連 | 1点 | 一円、百人 |

※ 名字（山田、田中など）は辞書に存在するが、正誤判定では不正解扱い

### ヒント機能
- 一定時間操作がないと、正解となるカードペアが光る
- デフォルト: ON、20秒後に表示
- 設定可能範囲: 5〜60秒

## データ仕様

### 漢字データ（80字）
```
一右雨円王音下火花貝学気九休玉金空月犬見五口校左三山子四糸字耳七車手十出女小上森人水正生青夕石赤千川先早草足村大男竹中虫町天田土二日入年白八百文木本名目立力林六
```

### 型定義
```typescript
interface Card {
  id: number
  kanji: string
}

interface Jukugo {
  word: string
  type: 'surname' | 'general' | 'number'
  meaning: string
  reverse?: string
}

interface HintSettings {
  enabled: boolean
  delay: number  // 秒
}
```

## ファイル構成

```
src/
├── components/
│   ├── TitleScreen.tsx      # タイトル画面
│   ├── GameScreen.tsx       # ゲーム画面
│   ├── ResultScreen.tsx     # 結果画面
│   └── *.module.css         # 各画面のスタイル
├── data/
│   ├── kanji.ts             # 漢字80字
│   └── jukugo.ts            # 熟語リスト（1,197件）
├── hooks/
│   └── useGame.ts           # ゲームロジック・ヒント機能
├── App.tsx                  # 画面遷移・設定管理
├── types.ts                 # 型定義
├── index.css                # グローバルスタイル
└── main.tsx                 # エントリーポイント

scripts/
├── jukugo-database.ts       # 熟語マスターデータ
└── generate-valid-csv.ts    # CSV生成スクリプト
```

## UI/UX仕様

### タッチ操作
- カードタップで選択/選択解除
- 選択中のカードは視覚的にハイライト（青枠）
- ヒント表示時は金色に光るアニメーション

### iPhone Safari対応
- セーフエリア対応（ノッチ対策）
- 100dvh使用（アドレスバー問題対策）
- オーバースクロール防止
- ダブルタップズーム無効

### 視覚的フィードバック
- 選択中: 青枠 + 拡大
- 正解時: 緑バナー表示
- 不正解時: 赤バナー表示
- ヒント: 金色に点滅

## デプロイ

### Cloudflare Pages設定
| 項目 | 値 |
|------|-----|
| Build command | `npm run build` |
| Build output directory | `dist` |

### 開発コマンド
```bash
npm run dev      # 開発サーバー起動
npm run build    # プロダクションビルド
npm run preview  # ビルド結果プレビュー
```
